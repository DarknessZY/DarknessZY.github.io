var searchFunc=function(t,n,r){"use strict";var c="<button type='button' class='local-search-close' id='local-search-close'></button>";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),t=document.getElementById(n),l=document.getElementById(r);t.addEventListener("input",function(){var u='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s]+/);if(l.innerHTML="",!(this.value.trim().length<=0)){if(e.forEach(function(t){var l,e,n,r=!0,c=(t.title&&""!==t.title.trim()||(t.title="Untitled"),t.title.trim().toLowerCase()),i=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),s=t.url,a=-1,o=-1;""!==i?h.forEach(function(t,e){l=c.indexOf(t),a=i.indexOf(t),l<0&&a<0?r=!1:(a<0&&(a=0),0==e&&(o=a))}):r=!1,r&&(u+="<li><a href='"+s+"' class='search-result-title'>"+c+"</a>",s=t.content.trim().replace(/<[^>]+>/g,""),0<=o&&(t=o+80,(t=0==(e=(e=o-20)<0?0:e)?100:t)>s.length&&(t=s.length),n=s.substr(e,t),h.forEach(function(t){var e=new RegExp(t,"gi");n=n.replace(e,'<em class="search-keyword">'+t+"</em>")}),u+='<p class="search-result">'+n+"...</p>"),u+="</li>")}),-1===(u+="</ul>").indexOf("<li>"))return l.innerHTML=c+'<div class="search-result-empty"><p><i class="fe fe-tired"></i> 没有找到内容，更换下搜索词试试吧~<p></div>';l.innerHTML=c+u}})}}),$(document).on("click","#local-search-close",function(){$("#local-search-input").val(""),$("#local-search-result").html("")})};