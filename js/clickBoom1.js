const numberOfParticules=20,minOrbitRadius=50,maxOrbitRadius=100,minCircleRadius=10,maxCircleRadius=20,minAnimeDuration=900,maxAnimeDuration=1500,minDiffuseRadius=50,maxDiffuseRadius=100;let canvasEl=document.querySelector(".fireworks"),ctx=canvasEl.getContext("2d"),pointerX=0,pointerY=0,tap="ontouchstart"in window||navigator.msMaxTouchPoints?"touchstart":"mousedown",colors=["127, 180, 226","157, 209, 243","204, 229, 255"];function setCanvasSize(){canvasEl.width=window.innerWidth,canvasEl.height=window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px"}function updateCoords(e){pointerX=e.clientX||e.touches[0].clientX,pointerY=e.clientY||e.touches[0].clientY}function setParticuleDirection(e){var a=anime.random(0,360)*Math.PI/180,i=anime.random(minDiffuseRadius,maxDiffuseRadius),i=[-1,1][anime.random(0,1)]*i;return{x:e.x+i*Math.cos(a),y:e.y+i*Math.sin(a)}}function createParticule(e,a){let i={};return i.x=e,i.y=a,i.color="rgba("+colors[anime.random(0,colors.length-1)]+","+anime.random(.2,.8)+")",i.radius=anime.random(minCircleRadius,maxCircleRadius),i.endPos=setParticuleDirection(i),i.draw=function(){ctx.beginPath(),ctx.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),ctx.fillStyle=i.color,ctx.fill()},i}function createCircle(e,a){let i={};return i.x=e,i.y=a,i.color="#000",i.radius=.1,i.alpha=.5,i.lineWidth=6,i.draw=function(){ctx.globalAlpha=i.alpha,ctx.beginPath(),ctx.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),ctx.lineWidth=i.lineWidth,ctx.strokeStyle=i.color,ctx.stroke(),ctx.globalAlpha=1},i}function renderParticule(a){for(let e=0;e<a.animatables.length;e++)a.animatables[e].target.draw()}function animateParticules(a,i){var e=createCircle(a,i),t=[];for(let e=0;e<numberOfParticules;e++)t.push(createParticule(a,i));anime.timeline().add({targets:t,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:.1,duration:anime.random(minAnimeDuration,maxAnimeDuration),easing:"easeOutExpo",update:renderParticule}).add({targets:e,radius:anime.random(minOrbitRadius,maxOrbitRadius),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0})}let render=anime({duration:1/0,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,function(e){render.play(),updateCoords(e),animateParticules(pointerX,pointerY)},!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1);