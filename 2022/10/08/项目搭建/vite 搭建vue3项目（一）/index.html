<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>vite 搭建vue3项目（一） | 耀耀切克闹</title><meta name="generator" content="hexo-theme-ayer"><link rel="shortcut icon" href="/mytouxiang.gif"><link rel="stylesheet" href="/dist/main.css"><link rel="stylesheet" href="/css/fonts/remixicon.css"><link rel="stylesheet" href="/css/custom.css"><script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"><script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script><style>.swal2-styled.swal2-confirm{font-size:1.6rem}</style><link rel="alternate" href="/atom.xml" title="耀耀切克闹" type="application/atom+xml"></head><body><div id="app"><canvas class="fireworks"></canvas><style>.fireworks{position:fixed;left:0;top:0;z-index:99999;pointer-events:none}</style><main class="content on"><section class="outer"><article id="post-项目搭建/vite 搭建vue3项目（一）" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal=""><div class="article-inner"><header class="article-header"><h1 class="article-title sea-center" style="border-left:0" itemprop="name">vite 搭建vue3项目（一）</h1></header><div class="article-meta"><a href="/2022/10/08/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/vite%20%E6%90%AD%E5%BB%BAvue3%E9%A1%B9%E7%9B%AE%EF%BC%88%E4%B8%80%EF%BC%89/" class="article-date"><time datetime="2022-10-08T09:52:00.000Z" itemprop="datePublished">2022-10-08</time></a><div class="article-category"><a class="article-category-link" href="/categories/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/">项目搭建</a></div><div class="word_count"><span class="post-time"><span class="post-meta-item-icon"><i class="ri-quill-pen-line"></i> <span class="post-meta-item-text">字数统计:</span> <span class="post-count">4.1k</span> </span></span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="ri-book-open-line"></i> <span class="post-meta-item-text">阅读时长≈</span> <span class="post-count">20 分钟</span></span></span></div></div><div class="tocbot"></div><div class="article-entry" itemprop="articleBody"><h1 id="一、创建项目"><a href="#一、创建项目" class="headerlink" title="一、创建项目"></a>一、创建项目</h1><h2 id="1-直接创建项目"><a href="#1-直接创建项目" class="headerlink" title="1.直接创建项目"></a>1.直接创建项目</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用 NPM:</span><br><span class="line">$ npm create vite@latest</span><br><span class="line">使用 Yarn:</span><br><span class="line">$ yarn create vite</span><br><span class="line">使用 PNPM:</span><br><span class="line">$ pnpm create vite</span><br><span class="line">然后按照提示操作即可！(选择vue，vue-ts)</span><br></pre></td></tr></tbody></table></figure><h2 id="2-使用模板创建项目"><a href="#2-使用模板创建项目" class="headerlink" title="2.使用模板创建项目"></a>2.使用模板创建项目</h2><p>通过附加的命令行选项直接指定项目名称和你想要使用的模板例如，要构建一个 Vite + Vue 项目，运行:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">使用 npm 6.x：</span><br><span class="line">npm create vite@latest my-vue-app --template vue</span><br><span class="line">使用 npm 7+, extra double-dash is needed:</span><br><span class="line">npm create vite@latest my-vue-app -- --template vue</span><br><span class="line">使用 yarn：</span><br><span class="line">yarn create vite my-vue-app --template vue</span><br><span class="line">使用 pnpm：</span><br><span class="line">pnpm create vite my-vue-app --template vue</span><br></pre></td></tr></tbody></table></figure><p>然后npm i 或者 yarn install 运行yarn dev 看看浏览器运行成了没，第一步就大功告成了</p><h1 id="二、vite配置别名和环境变量的配置"><a href="#二、vite配置别名和环境变量的配置" class="headerlink" title="二、vite配置别名和环境变量的配置"></a>二、vite配置别名和环境变量的配置</h1><h2 id="1-配置别名"><a href="#1-配置别名" class="headerlink" title="1.配置别名"></a>1.配置别名</h2><p>使用编辑器VScode打开刚刚搭建好的项目 进入配置文件 vite.config.ts</p><p>配置别名后的vite.config.ts：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { defineConfig } <span class="keyword">from</span> <span class="string">'vite'</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">'@vitejs/plugin-vue'</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">'path'</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resolve</span> = (<span class="params">dir: string</span>) =&gt; path.<span class="title function_">join</span>(__dirname, dir)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>({</span><br><span class="line">	<span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">	<span class="attr">resolve</span>: {</span><br><span class="line">		<span class="attr">alias</span>: {</span><br><span class="line">			<span class="string">'@'</span>: <span class="title function_">resolve</span>(<span class="string">'src'</span>),</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><p>此时 TS 可能有这个错误提示：找不到模块“path”或其相应的类型声明</p><p>解决方法：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @types/node --save-dev或者yarn add @types/node --save-dev</span><br></pre></td></tr></tbody></table></figure><p>还需要在tsconfig.json的paths配置</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">"baseUrl"</span><span class="punctuation">:</span> <span class="string">"."</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">"paths"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">     <span class="attr">"@/*"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">       <span class="string">"src/*"</span></span><br><span class="line">     <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">"comps/*"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">       <span class="string">"src/components/*"</span></span><br><span class="line">     <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">"views/*"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">       <span class="string">"src/views/*"</span></span><br><span class="line">     <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">"store/*"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">       <span class="string">"src/store/*"</span></span><br><span class="line">     <span class="punctuation">]</span></span><br><span class="line">   <span class="punctuation">}</span><span class="punctuation">,</span></span><br></pre></td></tr></tbody></table></figure><h2 id="2-环境变量的配置"><a href="#2-环境变量的配置" class="headerlink" title="2.环境变量的配置"></a>2.环境变量的配置</h2><p>vite 提供了两种模式：具有开发服务器的开发模式（development）和生产模式（production）</p><p>项目根目录新建:.env.development :</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=development</span><br><span class="line"></span><br><span class="line">VITE_APP_WEB_URL= 'YOUR WEB URL'</span><br></pre></td></tr></tbody></table></figure><p>项目根目录新建:.env.production :</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=production</span><br><span class="line"></span><br><span class="line">VITE_APP_WEB_URL= 'YOUR WEB URL'</span><br></pre></td></tr></tbody></table></figure><p>组件中使用：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(import.meta.env.VITE_APP_WEB_URL)</span><br></pre></td></tr></tbody></table></figure><p>配置 package.json:</p><p>打包区分开发环境和生产环境</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"build:dev": "vite build --mode development",</span><br><span class="line">"build:pro": "vite build --mode production",</span><br></pre></td></tr></tbody></table></figure><h1 id="三、配置跨域代理"><a href="#三、配置跨域代理" class="headerlink" title="三、配置跨域代理"></a>三、配置跨域代理</h1><p>在vite.config.ts中</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>({</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">    <span class="attr">resolve</span>: {</span><br><span class="line">        <span class="attr">alias</span>: {</span><br><span class="line">            <span class="string">'@'</span>: <span class="title function_">resolve</span>(<span class="string">'src'</span>),</span><br><span class="line">            <span class="attr">comps</span>: <span class="title function_">resolve</span>(<span class="string">'src/components'</span>),</span><br><span class="line">            <span class="attr">apis</span>: <span class="title function_">resolve</span>(<span class="string">'src/apis'</span>),</span><br><span class="line">            <span class="attr">views</span>: <span class="title function_">resolve</span>(<span class="string">'src/views'</span>),</span><br><span class="line">            <span class="attr">utils</span>: <span class="title function_">resolve</span>(<span class="string">'src/utils'</span>),</span><br><span class="line">            <span class="attr">routes</span>: <span class="title function_">resolve</span>(<span class="string">'src/routes'</span>),</span><br><span class="line">            <span class="attr">styles</span>: <span class="title function_">resolve</span>(<span class="string">'src/styles'</span>)</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">server</span>: {</span><br><span class="line">     <span class="comment">// 配置前端服务地址和端口</span></span><br><span class="line">        <span class="comment">//服务器主机名</span></span><br><span class="line">        <span class="attr">host</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="comment">//端口号</span></span><br><span class="line">        <span class="attr">port</span>: <span class="number">3088</span>,</span><br><span class="line">        <span class="comment">//设为 true 时若端口已被占用则会直接退出，而不是尝试下一个可用端口</span></span><br><span class="line">        <span class="attr">strictPort</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">//服务器启动时自动在浏览器中打开应用程序,当此值为字符串时，会被用作 URL 的路径名</span></span><br><span class="line">        <span class="attr">open</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">//自定义代理规则</span></span><br><span class="line">        <span class="attr">proxy</span>: {</span><br><span class="line">            <span class="comment">// 选项写法</span></span><br><span class="line">            <span class="string">'/api'</span>: {</span><br><span class="line">                <span class="attr">target</span>: <span class="string">''</span>,</span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">rewrite</span>: <span class="function"><span class="params">path</span> =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">''</span>)</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><p>使用跨域代理：</p><p>​ 用代理, 首先你得有一个标识, 告诉他你这个连接要用代理. 不然的话, 可能你的 html, css, js这些静态资源都跑去代理. 所以我们一般只有接口用代理, 静态文件用本地.‘/api’: {}, 就是告诉node, 我接口只有是’/api’开头的才用代理.所以你的接口就要这么写 /api/xx/xx. 最后代理的路径就是 <a target="_blank" rel="noopener" href="http://xxx.xx.com/api/xx/xx.%E5%8F%AF%E6%98%AF%E4%B8%8D%E5%AF%B9%E5%95%8A">http://xxx.xx.com/api/xx/xx.可是不对啊</a>, 我正确的接口路径里面没有/api啊. 所以就需要 pathRewrite,把’/api’去掉, 这样既能有正确标识, 又能在请求接口的时候去掉api.</p><h1 id="四、添加-css-预处理器-sass"><a href="#四、添加-css-预处理器-sass" class="headerlink" title="四、添加 css 预处理器 sass"></a>四、添加 css 预处理器 sass</h1><p>安装 ：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -D sass sass-loader</span><br><span class="line">或者yarn add sass sass-loader</span><br></pre></td></tr></tbody></table></figure><p>在 src/assets 下新增 style 文件夹，用于存放全局样式文件</p><h1 id="五、约束代码风格"><a href="#五、约束代码风格" class="headerlink" title="五、约束代码风格"></a>五、约束代码风格</h1><p>TypeScirpt 官方决定全面采用 ESLint 作为代码检查的工具，并创建了一个新项目 typescript-eslint，提供了 TypeScript 文件的解析器 @typescript-eslint/parser 和相关的配置选项 @typescript-eslint/eslint-plugin 等</p><h2 id="1-Eslint支持"><a href="#1-Eslint支持" class="headerlink" title="1.Eslint支持"></a><strong>1.Eslint支持</strong></h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># eslint 安装</span><br><span class="line">yarn add eslint --dev</span><br><span class="line"># eslint 插件安装</span><br><span class="line">yarn add eslint-plugin-vue --dev</span><br><span class="line"></span><br><span class="line">yarn add @typescript-eslint/eslint-plugin --dev</span><br><span class="line"></span><br><span class="line">yarn add eslint-plugin-prettier --dev</span><br><span class="line"></span><br><span class="line"># typescript parser</span><br><span class="line">yarn add @typescript-eslint/parser --dev</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">直接：npm i typescript eslint eslint-plugin-vue @typescript-eslint/parser @typescript-eslint/eslint-plugin -D</span><br></pre></td></tr></tbody></table></figure><p>注意: 如果 eslint 安装报错:</p><p>可以尝试运行以下命令:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn config set ignore-engines true</span><br></pre></td></tr></tbody></table></figure><p><strong>项目下新建 .eslintrc.js配置 eslint 校验规则:</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需要安装依赖:  npm i eslint-define-config</span></span><br><span class="line"><span class="keyword">const</span> { defineConfig } = <span class="built_in">require</span>(<span class="string">'eslint-define-config'</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>({</span><br><span class="line">    <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">/* 指定如何解析语法。*/</span></span><br><span class="line">    <span class="attr">parser</span>: <span class="string">'vue-eslint-parser'</span>,</span><br><span class="line">    <span class="comment">/* 优先级低于parse的语法解析配置 */</span></span><br><span class="line">    <span class="attr">parserOptions</span>: {</span><br><span class="line">        <span class="attr">parser</span>: <span class="string">'@typescript-eslint/parser'</span>,</span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// https://eslint.bootcss.com/docs/user-guide/configuring#specifying-globals</span></span><br><span class="line">    <span class="attr">globals</span>: {</span><br><span class="line">        <span class="title class_">Nullable</span>: <span class="literal">true</span>,</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">extends</span>: [</span><br><span class="line">        <span class="comment">// add more generic rulesets here, such as:</span></span><br><span class="line">        <span class="comment">// 'eslint:recommended',</span></span><br><span class="line">        <span class="comment">// 'plugin:vue/vue3-recommended',</span></span><br><span class="line">        <span class="comment">// 'plugin:vue/recommended' // Use this if you are using Vue.js 2.x.</span></span><br><span class="line"></span><br><span class="line">        <span class="string">'plugin:vue/vue3-recommended'</span>,</span><br><span class="line">        <span class="comment">// 此条内容开启会导致 全局定义的 ts 类型报  no-undef 错误，因为</span></span><br><span class="line">        <span class="comment">// https://cn.eslint.org/docs/rules/</span></span><br><span class="line">        <span class="string">'eslint:recommended'</span>,</span><br><span class="line">        <span class="string">'plugin:@typescript-eslint/recommended'</span>, <span class="comment">// typescript-eslint推荐规则,</span></span><br><span class="line">        <span class="string">'prettier'</span>,</span><br><span class="line">        <span class="string">'plugin:prettier/recommended'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">rules</span>: {</span><br><span class="line">        <span class="comment">// 'no-undef': 'off',</span></span><br><span class="line">        <span class="comment">// 禁止使用 var</span></span><br><span class="line">        <span class="string">'no-var'</span>: <span class="string">'error'</span>,</span><br><span class="line">        <span class="attr">semi</span>: <span class="string">'off'</span>,</span><br><span class="line">        <span class="comment">// 优先使用 interface 而不是 type</span></span><br><span class="line">        <span class="string">'@typescript-eslint/consistent-type-definitions'</span>: [<span class="string">'error'</span>, <span class="string">'interface'</span>],</span><br><span class="line">        <span class="string">'@typescript-eslint/no-explicit-any'</span>: <span class="string">'off'</span>,</span><br><span class="line">        <span class="string">'@typescript-eslint/explicit-module-boundary-types'</span>: <span class="string">'off'</span>,</span><br><span class="line">        <span class="string">'@typescript-eslint/ban-types'</span>: <span class="string">'off'</span>,</span><br><span class="line">        <span class="string">'@typescript-eslint/no-unused-vars'</span>: <span class="string">'off'</span>,</span><br><span class="line">        <span class="string">'vue/html-indent'</span>: [</span><br><span class="line">            <span class="string">'error'</span>,</span><br><span class="line">            <span class="number">4</span>,</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">attribute</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">baseIndent</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">closeBracket</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">alignAttributesVertically</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">ignores</span>: [],</span><br><span class="line">            },</span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// 关闭此规则 使用 prettier 的格式化规则， 感觉prettier 更加合理，</span></span><br><span class="line">        <span class="comment">// 而且一起使用会有冲突</span></span><br><span class="line">        <span class="string">'vue/max-attributes-per-line'</span>: [<span class="string">'off'</span>],</span><br><span class="line">        <span class="comment">// 强制使用驼峰命名</span></span><br><span class="line">        <span class="string">'vue/component-name-in-template-casing'</span>: [</span><br><span class="line">            <span class="string">'error'</span>,</span><br><span class="line">            <span class="string">'PascalCase'</span>,</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">registeredComponentsOnly</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">ignores</span>: [],</span><br><span class="line">            },</span><br><span class="line">        ],</span><br><span class="line">    },</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><p><strong>项目下新建 .eslintignore</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># eslint 忽略检查 (根据项目需要自行添加)</span><br><span class="line">node_modules</span><br><span class="line">dist</span><br></pre></td></tr></tbody></table></figure><h2 id="2-prettier支持"><a href="#2-prettier支持" class="headerlink" title="2.prettier支持"></a>2.prettier支持</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装 prettier</span><br><span class="line">yarn add prettier --dev</span><br></pre></td></tr></tbody></table></figure><p>解决 eslint 和 prettier 冲突</p><p>解决 ESLint 中的样式规范和 prettier 中样式规范的冲突，以 prettier 的样式规范为准，使 ESLint 中的样式规范自动失效</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装插件 eslint-config-prettier</span><br><span class="line">yarn add eslint-config-prettier --dev</span><br></pre></td></tr></tbody></table></figure><p><strong>项目下新建 .prettier.js</strong></p><p>配置 prettier 格式化规则:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">module.exports = {</span><br><span class="line">  tabWidth: 2,</span><br><span class="line">  jsxSingleQuote: true,</span><br><span class="line">  jsxBracketSameLine: true,</span><br><span class="line">  printWidth: 100,</span><br><span class="line">  singleQuote: true,</span><br><span class="line">  semi: false,</span><br><span class="line">  overrides: [</span><br><span class="line">    {</span><br><span class="line">      files: '*.json',</span><br><span class="line">      options: {</span><br><span class="line">        printWidth: 200,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  ],</span><br><span class="line">  arrowParens: 'always',</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>项目下新建 .prettierignore</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 忽略格式化文件 (根据项目需要自行添加)</span><br><span class="line">node_modules</span><br><span class="line">dist</span><br></pre></td></tr></tbody></table></figure><p>package.json 配置:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  "script": {</span><br><span class="line">    "lint": "eslint src --fix --ext .ts,.tsx,.vue,.js,.jsx",</span><br><span class="line">    "prettier": "prettier --write ."</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>上面配置完成后,可以运行以下<code>命令</code>测试下代码检查个<code>格式化</code>效果:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># eslint 检查</span><br><span class="line">yarn lint</span><br><span class="line"># prettier 自动格式化</span><br><span class="line">yarn prettier</span><br></pre></td></tr></tbody></table></figure><h1 id="六、安装路由"><a href="#六、安装路由" class="headerlink" title="六、安装路由"></a>六、安装路由</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装路由</span><br><span class="line">yarn add vue-router@4</span><br></pre></td></tr></tbody></table></figure><p>在 src 文件下新增 router 文件夹 =&gt; index.ts 文件,内容如下:</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createRouter, createWebHistory, <span class="title class_">RouteRecordRaw</span> } <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">RouteRecordRaw</span>[] = [</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">'Login'</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">'@/pages/login/Login.vue'</span>), <span class="comment">// 注意这里要带上 文件后缀.vue</span></span><br><span class="line">  },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>({</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  routes,</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></tbody></table></figure><p>修改入口文件 mian.ts :</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createApp } <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">'#app'</span>)</span><br></pre></td></tr></tbody></table></figure><h1 id="七、axios统一请求封装"><a href="#七、axios统一请求封装" class="headerlink" title="七、axios统一请求封装"></a>七、axios统一请求封装</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 安装 axios</span><br><span class="line">yarn add axios</span><br><span class="line"># 安装 nprogress 用于请求 loading</span><br><span class="line"># 也可以根据项目需求自定义其它 loading</span><br><span class="line">yarn add nprogress</span><br><span class="line"># 类型声明，或者添加一个包含 `declare module 'nprogress'</span><br><span class="line">yarn add @types/nprogress --dev</span><br></pre></td></tr></tbody></table></figure><p>新增 service 文件夹，service 下新增 http.ts 文件以及 moudles 文件夹(存放各模块接口)和interface(公共ts)文件夹:</p><p>http.ts : 用于axios封装**</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http.ts</span></span><br><span class="line"><span class="keyword">import</span> axios, { <span class="title class_">AxiosRequestConfig</span> } <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NProgress</span> <span class="keyword">from</span> <span class="string">'nprogress'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置请求头和请求路径</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">'/api'</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">timeout</span> = <span class="number">10000</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">post</span>[<span class="string">'Content-Type'</span>] = <span class="string">'application/json;charset=UTF-8'</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  (config): <span class="title class_">AxiosRequestConfig</span>&lt;any&gt; =&gt; {</span><br><span class="line">    <span class="keyword">const</span> token = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">'token'</span>)</span><br><span class="line">    <span class="keyword">if</span> (token) {</span><br><span class="line">      <span class="comment">//@ts-ignore</span></span><br><span class="line">      config.<span class="property">headers</span>.<span class="property">token</span> = token</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  },</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">return</span> error</span><br><span class="line">  }</span><br><span class="line">)</span><br><span class="line"><span class="comment">// 响应拦截</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="number">111</span>) {</span><br><span class="line">    sessionStorage.<span class="title function_">setItem</span>(<span class="string">'token'</span>, <span class="string">''</span>)</span><br><span class="line">    <span class="comment">// token过期操作</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">ResType</span>&lt;T&gt; {</span><br><span class="line">  <span class="attr">code</span>: number</span><br><span class="line">  data?: T</span><br><span class="line">  <span class="attr">msg</span>: string</span><br><span class="line">  err?: string</span><br><span class="line">}</span><br><span class="line">interface <span class="title class_">Http</span> {</span><br><span class="line">  get&lt;T&gt;(<span class="attr">url</span>: string, params?: unknown): <span class="title class_">Promise</span>&lt;<span class="title class_">ResType</span>&lt;T&gt;&gt;</span><br><span class="line">  post&lt;T&gt;(<span class="attr">url</span>: string, params?: unknown): <span class="title class_">Promise</span>&lt;<span class="title class_">ResType</span>&lt;T&gt;&gt;</span><br><span class="line">  upload&lt;T&gt;(<span class="attr">url</span>: string, <span class="attr">params</span>: unknown): <span class="title class_">Promise</span>&lt;<span class="title class_">ResType</span>&lt;T&gt;&gt;</span><br><span class="line">  <span class="title function_">download</span>(<span class="attr">url</span>: string): <span class="keyword">void</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">http</span>: <span class="title class_">Http</span> = {</span><br><span class="line">  <span class="title function_">get</span>(<span class="params">url, params</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">start</span>()</span><br><span class="line">      axios</span><br><span class="line">        .<span class="title function_">get</span>(url, { params })</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">          <span class="title class_">NProgress</span>.<span class="title function_">done</span>()</span><br><span class="line">          <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">        })</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> {</span><br><span class="line">          <span class="title class_">NProgress</span>.<span class="title function_">done</span>()</span><br><span class="line">          <span class="title function_">reject</span>(err.<span class="property">data</span>)</span><br><span class="line">        })</span><br><span class="line">    })</span><br><span class="line">  },</span><br><span class="line">  <span class="title function_">post</span>(<span class="params">url, params</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">start</span>()</span><br><span class="line">      axios</span><br><span class="line">        .<span class="title function_">post</span>(url, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(params))</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">          <span class="title class_">NProgress</span>.<span class="title function_">done</span>()</span><br><span class="line">          <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">        })</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> {</span><br><span class="line">          <span class="title class_">NProgress</span>.<span class="title function_">done</span>()</span><br><span class="line">          <span class="title function_">reject</span>(err.<span class="property">data</span>)</span><br><span class="line">        })</span><br><span class="line">    })</span><br><span class="line">  },</span><br><span class="line">  <span class="title function_">upload</span>(<span class="params">url, file</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">start</span>()</span><br><span class="line">      axios</span><br><span class="line">        .<span class="title function_">post</span>(url, file, {</span><br><span class="line">          <span class="attr">headers</span>: { <span class="string">'Content-Type'</span>: <span class="string">'multipart/form-data'</span> },</span><br><span class="line">        })</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">          <span class="title class_">NProgress</span>.<span class="title function_">done</span>()</span><br><span class="line">          <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">        })</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> {</span><br><span class="line">          <span class="title class_">NProgress</span>.<span class="title function_">done</span>()</span><br><span class="line">          <span class="title function_">reject</span>(err.<span class="property">data</span>)</span><br><span class="line">        })</span><br><span class="line">    })</span><br><span class="line">  },</span><br><span class="line">  <span class="title function_">download</span>(<span class="params">url</span>) {</span><br><span class="line">    <span class="keyword">const</span> iframe = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">'iframe'</span>)</span><br><span class="line">    iframe.<span class="property">style</span>.<span class="property">display</span> = <span class="string">'none'</span></span><br><span class="line">    iframe.<span class="property">src</span> = url</span><br><span class="line">    iframe.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(iframe)</span><br><span class="line">    }</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(iframe)</span><br><span class="line">  },</span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> http</span><br></pre></td></tr></tbody></table></figure><p>例如：moudles 下新增login文件夹，用于存放登录模块的请求接口,login 文件夹下分别新增 login.ts types.ts :</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">'@/service/http'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> T <span class="keyword">from</span> <span class="string">'./types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">loginApi</span>: T.<span class="property">ILoginApi</span> = {</span><br><span class="line">    <span class="title function_">login</span>(<span class="params">params</span>){</span><br><span class="line">        <span class="keyword">return</span> http.<span class="title function_">post</span>(<span class="string">'/login'</span>, params)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> loginApi</span><br></pre></td></tr></tbody></table></figure><p>types.ts:</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> interface <span class="title class_">ILoginParams</span> {</span><br><span class="line">    <span class="attr">userName</span>: string</span><br><span class="line">    <span class="attr">passWord</span>: string | number</span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">ILoginApi</span> {</span><br><span class="line">    <span class="attr">login</span>: <span class="function">(<span class="params">params: ILoginParams</span>)=&gt;</span> <span class="title class_">Promise</span>&lt;any&gt;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="八、状态管理-pinia"><a href="#八、状态管理-pinia" class="headerlink" title="八、状态管理 pinia"></a>八、状态管理 pinia</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装</span><br><span class="line">yarn add pinia@next</span><br></pre></td></tr></tbody></table></figure><p>在 <code>src</code> 文件夹下新增 <code>store</code> 文件夹,接在在 store 中新增 main.ts</p><p>main.ts 中增加</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 引入</span><br><span class="line"><span class="keyword">import</span> { createPinia } <span class="keyword">from</span> <span class="string">"pinia"</span></span><br><span class="line"># 创建根存储库并将其传递给应用程序</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br></pre></td></tr></tbody></table></figure><h1 id="九、添加element-plus"><a href="#九、添加element-plus" class="headerlink" title="九、添加element-plus"></a>九、添加element-plus</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#安装 element-plus </span><br><span class="line">yarn add element-plus</span><br></pre></td></tr></tbody></table></figure><h2 id="1-element-plus按需引入"><a href="#1-element-plus按需引入" class="headerlink" title="1.element-plus按需引入"></a>1.element-plus按需引入</h2><p>需要用到两个插件unplugin-vue-components、unplugin-auto-import这两个插件。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i unplugin-vue-components unplugin-auto-import -D</span><br></pre></td></tr></tbody></table></figure><p>另外这里要注意的是，由于使用了 unplugin-vue-components unplugin-auto-import 这两个插件，按需加载其实是不需要 import 组件，但如果使用Api创建组件，例如elmesage,elnotification这些，可以看到不 import 的话会提示错误，如果 import 又会导致样式的丢失,需要下载一个插件</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add unplugin-element-plus -D</span><br><span class="line">#或者 </span><br><span class="line">npm i unplugin-element-plus -D </span><br></pre></td></tr></tbody></table></figure><p>配置vite.config.js</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { defineConfig } <span class="keyword">from</span> <span class="string">"vite"</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">"@vitejs/plugin-vue"</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">"path"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">'unplugin-auto-import/vite'</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">'unplugin-vue-components/vite'</span></span><br><span class="line"><span class="keyword">import</span> { <span class="title class_">ElementPlusResolver</span> } <span class="keyword">from</span> <span class="string">'unplugin-vue-components/resolvers'</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">'unplugin-element-plus/vite'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resolve</span> = (<span class="params">dir: string</span>) =&gt; path.<span class="title function_">join</span>(__dirname, dir);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>({</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title class_">AutoImport</span>({</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    }),</span><br><span class="line">    <span class="title class_">Components</span>({</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    }),</span><br><span class="line">    <span class="title class_">ElementPlus</span>()</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">//配置别名</span></span><br><span class="line">  <span class="attr">resolve</span>: {</span><br><span class="line">    <span class="attr">alias</span>: {</span><br><span class="line">      <span class="string">"@"</span>: <span class="title function_">resolve</span>(<span class="string">"src"</span>),</span><br><span class="line">      <span class="attr">comps</span>: <span class="title function_">resolve</span>(<span class="string">"src/components"</span>),</span><br><span class="line">      <span class="attr">service</span>: <span class="title function_">resolve</span>(<span class="string">"src/service"</span>),</span><br><span class="line">      <span class="attr">views</span>: <span class="title function_">resolve</span>(<span class="string">"src/views"</span>),</span><br><span class="line">      <span class="attr">route</span>: <span class="title function_">resolve</span>(<span class="string">"src/route"</span>),</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line"> <span class="comment">// css:{</span></span><br><span class="line">    <span class="comment">//preprocessorOptions:{</span></span><br><span class="line">      <span class="comment">//scss:{</span></span><br><span class="line">      <span class="comment">//  additionalData:'@import "@/assets/style/main.scss";'</span></span><br><span class="line">     <span class="comment">// }</span></span><br><span class="line">    <span class="comment">//}</span></span><br><span class="line"> <span class="comment">// },</span></span><br><span class="line">  <span class="comment">//配置跨域代理</span></span><br><span class="line">  <span class="attr">server</span>: {</span><br><span class="line">    <span class="comment">// 配置前端服务地址和端口</span></span><br><span class="line">    <span class="comment">//服务器主机名</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="comment">//端口号</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">3088</span>,</span><br><span class="line">    <span class="comment">//设为 true 时若端口已被占用则会直接退出，而不是尝试下一个可用端口</span></span><br><span class="line">    <span class="attr">strictPort</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//服务器启动时自动在浏览器中打开应用程序,当此值为字符串时，会被用作 URL 的路径名</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//自定义代理规则</span></span><br><span class="line">    <span class="attr">proxy</span>: {</span><br><span class="line">      <span class="string">"/api"</span>: {</span><br><span class="line">        <span class="attr">target</span>: <span class="string">"http://localhost:3000"</span>, <span class="comment">//要代理的本地api地址，也可以换成线上测试地址</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">//跨域</span></span><br><span class="line">        <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">""</span>),</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h2 id="2-添加element-plus图标"><a href="#2-添加element-plus图标" class="headerlink" title="2.添加element-plus图标"></a>2.添加element-plus图标</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># NPM</span><br><span class="line">$ npm install @element-plus/icons-vue</span><br><span class="line"># Yarn</span><br><span class="line">$ yarn add @element-plus/icons-vue</span><br></pre></td></tr></tbody></table></figure><p>然后在main.ts中全局注册并使用</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">'@element-plus/icons-vue'</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="title class_">ElementPlusIconsVue</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">	app.<span class="title function_">component</span>(key, <span class="title class_">ElementPlusIconsVue</span>[key <span class="keyword">as</span> keyof <span class="keyword">typeof</span> <span class="title class_">ElementPlusIconsVue</span>]);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h1 id="十、svg图标插件使用"><a href="#十、svg图标插件使用" class="headerlink" title="十、svg图标插件使用"></a>十、svg图标插件使用</h1><h2 id="1-安装svg图标插件"><a href="#1-安装svg图标插件" class="headerlink" title="1.安装svg图标插件"></a>1.安装svg图标插件</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#安装插件vue-svg-icon</span><br><span class="line">npm install vue-svg-icon --save-dev</span><br></pre></td></tr></tbody></table></figure><h2 id="2-注册全局组件svgIcon"><a href="#2-注册全局组件svgIcon" class="headerlink" title="2. 注册全局组件svgIcon"></a>2. 注册全局组件svgIcon</h2><p>在main.ts中全局注册并使用</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createApp } <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index'</span></span><br><span class="line"><span class="keyword">import</span> { createPinia } <span class="keyword">from</span> <span class="string">"pinia"</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SvgIcon</span> <span class="keyword">from</span> <span class="string">'./components/SvgIcon/index.vue'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">'@element-plus/icons-vue'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"element-plus/dist/index.css"</span></span><br><span class="line"><span class="comment">//样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/index.scss'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="comment">// 注册element Icons组件</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="title class_">ElementPlusIconsVue</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">	app.<span class="title function_">component</span>(key, <span class="title class_">ElementPlusIconsVue</span>[key <span class="keyword">as</span> keyof <span class="keyword">typeof</span> <span class="title class_">ElementPlusIconsVue</span>]);</span><br><span class="line">});</span><br><span class="line">app.<span class="title function_">use</span>(router).<span class="title function_">use</span>(<span class="title function_">createPinia</span>()).<span class="title function_">component</span>(<span class="string">'svg-icon'</span>, <span class="title class_">SvgIcon</span>).<span class="title function_">mount</span>(<span class="string">'#app'</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="3-下载存放svg图标"><a href="#3-下载存放svg图标" class="headerlink" title="3.下载存放svg图标"></a>3.下载存放svg图标</h2><p>在src下新建assets=&gt;icons=&gt;svg文件夹，用来存放svg图标，所有下载的SVG图标放入其中</p><p><img src="https://cdn.jsdelivr.net/gh/DarknessZY/myblog@master/img/image-20221008180639420.png" alt="image-20221008180639420"></p><h2 id="4-使用svg图标"><a href="#4-使用svg图标" class="headerlink" title="4. 使用svg图标"></a>4. 使用svg图标</h2><p>以bug.svg图标为例，修改scale的值调整图标的大小。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svgIcon name="del" :scale="1" /&gt;</span><br></pre></td></tr></tbody></table></figure><h1 id="十一、untils文件夹"><a href="#十一、untils文件夹" class="headerlink" title="十一、untils文件夹"></a>十一、untils文件夹</h1><p>在根目录下新建一个untils文件夹，这个文件夹下的内容主要是导出常用的一些公共方法等等:</p><p><img src="https://cdn.jsdelivr.net/gh/DarknessZY/myblog@master/img/image-20221008171843967.png" alt="image-20221008171843967"></p><p>untils=&gt;util.ts</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常用的工具方法</span></span><br><span class="line"><span class="keyword">import</span> { isArray } <span class="keyword">from</span> <span class="string">"@/utils/is"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 获取localStorage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">String</span>} key Storage名称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">string</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">localGet</span>(<span class="params">key: string</span>) {</span><br><span class="line">	<span class="keyword">const</span> value = <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">	<span class="keyword">try</span> {</span><br><span class="line">		<span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(key) <span class="keyword">as</span> string);</span><br><span class="line">	} <span class="keyword">catch</span> (error) {</span><br><span class="line">		<span class="keyword">return</span> value;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 存储localStorage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">String</span>} key Storage名称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Any</span>} value Storage值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">void</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">localSet</span>(<span class="params">key: string, value: any</span>) {</span><br><span class="line">	<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 清除localStorage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">String</span>} key Storage名称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">void</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">localRemove</span>(<span class="params">key: string</span>) {</span><br><span class="line">	<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 清除所有localStorage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">void</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">localClear</span>(<span class="params"></span>) {</span><br><span class="line">	<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 对象数组深克隆</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Object</span>} obj 源对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">object</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> deepCopy&lt;T&gt;(<span class="attr">obj</span>: any): T {</span><br><span class="line">	<span class="keyword">let</span> <span class="attr">newObj</span>: any;</span><br><span class="line">	<span class="keyword">try</span> {</span><br><span class="line">		newObj = obj.<span class="property">push</span> ? [] : {};</span><br><span class="line">	} <span class="keyword">catch</span> (error) {</span><br><span class="line">		newObj = {};</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> obj) {</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">typeof</span> obj[attr] === <span class="string">"object"</span>) {</span><br><span class="line">			newObj[attr] = <span class="title function_">deepCopy</span>(obj[attr]);</span><br><span class="line">		} <span class="keyword">else</span> {</span><br><span class="line">			newObj[attr] = obj[attr];</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> newObj;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 判断数据类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Any</span>} val 需要判断类型的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">string</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isType</span>(<span class="params">val: any</span>) {</span><br><span class="line">	<span class="keyword">if</span> (val === <span class="literal">null</span>) <span class="keyword">return</span> <span class="string">"null"</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> val !== <span class="string">"object"</span>) <span class="keyword">return</span> <span class="keyword">typeof</span> val;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(val).<span class="title function_">slice</span>(<span class="number">8</span>, -<span class="number">1</span>).<span class="title function_">toLocaleLowerCase</span>();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 生成随机数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Number</span>} min 最小值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Number</span>} max 最大值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">number</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">randomNum</span>(<span class="params">min: number, max: number</span>): number {</span><br><span class="line">	<span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (min - max) + max);</span><br><span class="line">	<span class="keyword">return</span> num;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 递归查询当前路由所对应的路由</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Array</span>} menuList 菜单列表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">String</span>} path 当前地址</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">array</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> getTabPane&lt;T, U&gt;(<span class="attr">menuList</span>: any[], <span class="attr">path</span>: U): T {</span><br><span class="line">	<span class="keyword">let</span> <span class="attr">result</span>: any;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> menuList || []) {</span><br><span class="line">		<span class="keyword">if</span> (item.<span class="property">path</span> === path) result = item;</span><br><span class="line">		<span class="keyword">const</span> res = <span class="title function_">getTabPane</span>(item.<span class="property">children</span>, path);</span><br><span class="line">		<span class="keyword">if</span> (res) result = res;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 使用递归处理路由菜单，生成一维数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Array</span>} menuList 所有菜单列表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Array</span>} newArr 菜单的一维数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">array</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">handleRouter</span>(<span class="params">routerList: Menu.MenuOptions[], newArr: string[] = []</span>) {</span><br><span class="line">	routerList.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item: Menu.MenuOptions</span>) =&gt;</span> {</span><br><span class="line">		<span class="keyword">typeof</span> item === <span class="string">"object"</span> &amp;&amp; item.<span class="property">path</span> &amp;&amp; newArr.<span class="title function_">push</span>(item.<span class="property">path</span>);</span><br><span class="line">		item.<span class="property">children</span> &amp;&amp; item.<span class="property">children</span>.<span class="property">length</span> &amp;&amp; <span class="title function_">handleRouter</span>(item.<span class="property">children</span>, newArr);</span><br><span class="line">	});</span><br><span class="line">	<span class="keyword">return</span> newArr;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 扁平化数组对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Array</span>} arr 数组对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">array</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getFlatArr</span>(<span class="params">arr: any</span>) {</span><br><span class="line">	<span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">pre: any, current: any</span>) =&gt;</span> {</span><br><span class="line">		<span class="keyword">let</span> flatArr = [...pre, current];</span><br><span class="line">		<span class="keyword">if</span> (current.<span class="property">children</span>) flatArr = [...flatArr, ...<span class="title function_">getFlatArr</span>(current.<span class="property">children</span>)];</span><br><span class="line">		<span class="keyword">return</span> flatArr;</span><br><span class="line">	}, []);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 格式化表格单元格默认值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Number</span>} row 行</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Number</span>} col 列</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">String</span>} callValue 当前单元格值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">string</span></span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">defaultFormat</span>(<span class="params">row: number, col: number, callValue: any</span>) {</span><br><span class="line">	<span class="comment">// 如果当前值为数组,使用 / 拼接（根据需求自定义）</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="title function_">isArray</span>(callValue)) <span class="keyword">return</span> callValue.<span class="property">length</span> ? callValue.<span class="title function_">join</span>(<span class="string">" / "</span>) : <span class="string">"--"</span>;</span><br><span class="line">	<span class="keyword">return</span> callValue ?? <span class="string">"--"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 处理无数据情况</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">String</span>} callValue 需要处理的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">string</span></span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">formatValue</span>(<span class="params">callValue: any</span>) {</span><br><span class="line">	<span class="comment">// 如果当前值为数组,使用 / 拼接（根据需求自定义）</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="title function_">isArray</span>(callValue)) <span class="keyword">return</span> callValue.<span class="property">length</span> ? callValue.<span class="title function_">join</span>(<span class="string">" / "</span>) : <span class="string">"--"</span>;</span><br><span class="line">	<span class="keyword">return</span> callValue ?? <span class="string">"--"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 根据枚举列表查询当需要的数据（如果指定了 label 和 value 的 key值，会自动识别格式化）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">String</span>} callValue 当前单元格值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">Array</span>} enumData 枚举列表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> {<span class="type">String</span>} type 过滤类型（目前只有 tag）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> <span class="variable">string</span></span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">filterEnum</span>(<span class="params">callValue: any, enumData: any, searchProps?: { [key: string]: any }, type?: string</span>): string {</span><br><span class="line">	<span class="keyword">const</span> value = searchProps?.<span class="property">value</span> ?? <span class="string">"value"</span>;</span><br><span class="line">	<span class="keyword">const</span> label = searchProps?.<span class="property">label</span> ?? <span class="string">"label"</span>;</span><br><span class="line">	<span class="keyword">let</span> <span class="attr">filterData</span>: any = {};</span><br><span class="line">	<span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(enumData)) filterData = enumData.<span class="title function_">find</span>(<span class="function">(<span class="params">item: any</span>) =&gt;</span> item[value] === callValue);</span><br><span class="line">	<span class="keyword">if</span> (type == <span class="string">"tag"</span>) <span class="keyword">return</span> filterData?.<span class="property">tagType</span> ? filterData.<span class="property">tagType</span> : <span class="string">""</span>;</span><br><span class="line">	<span class="keyword">return</span> filterData ? filterData[label] : <span class="string">"--"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>is文件夹下的index.ts 常用的判断方式，is=&gt;index.ts</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toString = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 判断值是否未某个类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">is</span>(<span class="params">val: unknown, type: string</span>) {</span><br><span class="line">	<span class="keyword">return</span> toString.<span class="title function_">call</span>(val) === <span class="string">`[object <span class="subst">${type}</span>]`</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:  是否为函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> isFunction&lt;T = <span class="title class_">Function</span>&gt;(<span class="attr">val</span>: unknown): val is T {</span><br><span class="line">	<span class="keyword">return</span> <span class="title function_">is</span>(val, <span class="string">"Function"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 是否已定义</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isDef = &lt;T = unknown&gt;(val?: T): val is T =&gt; {</span><br><span class="line">	return typeof val !== "undefined";</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">export const isUnDef = &lt;T = unknown&gt;(val?: T): val is T =&gt; {</span><br><span class="line">	return !isDef(val);</span><br><span class="line">};</span><br><span class="line">/**</span><br><span class="line"> * @description: 是否为对象</span><br><span class="line"> */</span><br><span class="line">export const isObject = (val: any): val is Record&lt;any, any&gt; =&gt; {</span><br><span class="line">	return val !== null &amp;&amp; is(val, "Object");</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description:  是否为时间</span><br><span class="line"> */</span><br><span class="line">export function isDate(val: unknown): val is Date {</span><br><span class="line">	return is(val, "Date");</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description:  是否为数值</span><br><span class="line"> */</span><br><span class="line">export function isNumber(val: unknown): val is number {</span><br><span class="line">	return is(val, "Number");</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description:  是否为AsyncFunction</span><br><span class="line"> */</span><br><span class="line">export function isAsyncFunction&lt;T = any&gt;(val: unknown): val is Promise&lt;T&gt; {</span><br><span class="line">	return is(val, "AsyncFunction");</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description:  是否为promise</span><br><span class="line"> */</span><br><span class="line">export function isPromise&lt;T = any&gt;(val: unknown): val is Promise&lt;T&gt; {</span><br><span class="line">	return is(val, "Promise") &amp;&amp; isObject(val) &amp;&amp; isFunction(val.then) &amp;&amp; isFunction(val.catch);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description:  是否为字符串</span><br><span class="line"> */</span><br><span class="line">export function isString(val: unknown): val is string {</span><br><span class="line">	return is(val, "String");</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description:  是否为boolean类型</span><br><span class="line"> */</span><br><span class="line">export function isBoolean(val: unknown): val is boolean {</span><br><span class="line">	return is(val, "Boolean");</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description:  是否为数组</span><br><span class="line"> */</span><br><span class="line">export function isArray(val: any): val is Array&lt;any&gt; {</span><br><span class="line">	return val &amp;&amp; Array.isArray(val);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description: 是否客户端</span><br><span class="line"> */</span><br><span class="line">export const isClient = () =&gt; {</span><br><span class="line">	return typeof window !== "undefined";</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @description: 是否为浏览器</span><br><span class="line"> */</span><br><span class="line">export const isWindow = (val: any): val is Window =&gt; {</span><br><span class="line">	return typeof window !== "undefined" &amp;&amp; is(val, "Window");</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">export const isElement = (val: unknown): val is Element =&gt; {</span><br><span class="line">	return isObject(val) &amp;&amp; !!val.tagName;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">export const isServer = typeof window === "undefined";</span><br><span class="line"></span><br><span class="line">// 是否为图片节点</span><br><span class="line">export function isImageDom(o: Element) {</span><br><span class="line">	return o &amp;&amp; ["IMAGE", "IMG"].includes(o.tagName);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export function isNull(val: unknown): val is null {</span><br><span class="line">	return val === null;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export function isNullAndUnDef(val: unknown): val is null | undefined {</span><br><span class="line">	return isUnDef(val) &amp;&amp; isNull(val);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export function isNullOrUnDef(val: unknown): val is null | undefined {</span><br><span class="line">	return isUnDef(val) || isNull(val);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="十二、typings-gt-global-d-ts放全局变量-命名空间"><a href="#十二、typings-gt-global-d-ts放全局变量-命名空间" class="headerlink" title="十二、typings->global.d.ts放全局变量,命名空间"></a>十二、typings-&gt;global.d.ts放全局变量,命名空间</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// * Menu</span><br><span class="line">declare namespace Menu {</span><br><span class="line">	interface MenuOptions {</span><br><span class="line">		path: string;</span><br><span class="line">		title: string;</span><br><span class="line">		icon?: string;</span><br><span class="line">		isLink?: string;</span><br><span class="line">		close?: boolean;</span><br><span class="line">		children?: MenuOptions[];</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">declare type TabsOptions = Menu.MenuOptions &amp; {};</span><br><span class="line"></span><br><span class="line">// * Vite</span><br><span class="line">declare type Recordable&lt;T = any&gt; = Record&lt;string, T&gt;;</span><br><span class="line"></span><br><span class="line">declare interface ViteEnv {</span><br><span class="line">	VITE_API_URL: string;</span><br><span class="line">	VITE_PORT: number;</span><br><span class="line">	VITE_OPEN: boolean;</span><br><span class="line">	VITE_GLOB_APP_TITLE: string;</span><br><span class="line">	VITE_DROP_CONSOLE: boolean;</span><br><span class="line">	VITE_PROXY_URL: string;</span><br><span class="line">	VITE_BUILD_GZIP: boolean;</span><br><span class="line">	VITE_REPORT: boolean;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="十三、vue3-0使用tsx语法"><a href="#十三、vue3-0使用tsx语法" class="headerlink" title="十三、vue3.0使用tsx语法"></a>十三、vue3.0使用tsx语法</h1><p>1.下载</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @vitejs/plugin-vue-jsx -D</span><br></pre></td></tr></tbody></table></figure><p>2.引入</p><p>在vite.config.ts中</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import { defineConfig } from 'vite'</span><br><span class="line">import vue from '@vitejs/plugin-vue'</span><br><span class="line">import vueJsx from '@vitejs/plugin-vue-jsx';</span><br><span class="line"></span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig({</span><br><span class="line">  plugins: [vue(),vueJsx()]</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><p>3.tsconfig.json 配置文件</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"jsx": "preserve",</span><br><span class="line">"jsxFactory": "h",</span><br><span class="line">"jsxFragmentFactory": "Fragment",</span><br></pre></td></tr></tbody></table></figure><p><font color="#478fd2">参考文章：</font></p><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7036745610954801166#heading-21">Vite2 + Vue3 + TypeScript + Pinia 搭建一套企业级的开发脚手架</a></p><p><a target="_blank" rel="noopener" href="https://juejin.cn/user/3456520289517608/posts">Vue3 + Ts + ElementPlus + Vite2 从零搭建后台管理系统</a></p><p><a target="_blank" rel="noopener" href="https://github.com/someGenki/vue-lite-admin">禾几元老哥的github源码</a></p></div><div class="declare"><ul class="post-copyright"><li><i class="ri-copyright-line"></i> <strong>版权声明： </strong>本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！</li></ul></div><footer class="article-footer"><div class="share-btn"><span class="share-sns share-outer"><i class="ri-share-forward-line"></i> 分享</span><div class="share-wrap"><i class="arrow"></i><div class="share-icons"><a class="weibo share-sns" href="javascript:;" data-type="weibo"><i class="ri-weibo-fill"></i> </a><a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin"><i class="ri-wechat-fill"></i> </a><a class="qq share-sns" href="javascript:;" data-type="qq"><i class="ri-qq-fill"></i> </a><a class="douban share-sns" href="javascript:;" data-type="douban"><i class="ri-douban-line"></i> </a><a class="facebook share-sns" href="javascript:;" data-type="facebook"><i class="ri-facebook-circle-fill"></i> </a><a class="twitter share-sns" href="javascript:;" data-type="twitter"><i class="ri-twitter-fill"></i> </a><a class="google share-sns" href="javascript:;" data-type="google"><i class="ri-google-fill"></i></a></div></div></div><div class="wx-share-modal"><a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a><p>扫一扫，分享到微信</p><div class="wx-qrcode"><img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&amp;data=http://example.com/2022/10/08/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/vite%20%E6%90%AD%E5%BB%BAvue3%E9%A1%B9%E7%9B%AE%EF%BC%88%E4%B8%80%EF%BC%89/" alt="微信分享二维码"></div></div><div id="share-mask"></div><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pinia/" rel="tag">pinia</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vite/" rel="tag">vite</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue3/" rel="tag">vue3</a></li></ul></footer></div><nav class="article-nav"><a href="/2022/10/11/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2(%E4%BA%94)%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8valine%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/" class="article-nav-link"><strong class="article-nav-caption">上一篇</strong><div class="article-nav-title">从零开始搭建博客(五)——使用valine评论系统</div></a><a href="/2022/09/30/git%E5%9F%BA%E7%A1%80/" class="article-nav-link"><strong class="article-nav-caption">下一篇</strong><div class="article-nav-title">git基础</div></a></nav><div id="vcomments-box"><div id="vcomments"></div></div><script src="https://cdn.staticfile.org/valine/1.4.16/Valine.min.js"></script><script>new Valine({el:"#vcomments",app_id:"Kns1Irtve5srHrN6eTzDAsPA-gzGzoHsz",app_key:"fIJ87gMieZJMaBj9UVMO7lhX",path:window.location.pathname,avatar:"wavatar",placeholder:"给我的文章加点评论吧~",recordIP:!0});const infoEle=document.querySelector("#vcomments .info");infoEle&&infoEle.childNodes&&infoEle.childNodes.length>0&&infoEle.childNodes.forEach((function(e){e.parentNode.removeChild(e)}))</script><style>#vcomments-box{padding:5px 30px}@media screen and (max-width:800px){#vcomments-box{padding:5px 0}}#vcomments-box #vcomments{background-color:#fff}.v .vlist .vcard .vh{padding-right:20px}.v .vlist .vcard{padding-left:10px}</style></article></section><footer class="footer"><div class="outer"><ul><li>Copyrights © 2022-2024 <i class="ri-heart-fill heart_icon"></i> 耀耀切克闹</li></ul><ul><li></li></ul><ul><li><span><span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span> <span class="division">|</span> <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span></span></li></ul><ul><li><a href="https://beian.miit.gov.cn/" target="_black" rel="nofollow">京ICP备2023001417号</a></li></ul><ul><li><img src="/images/beian.png"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42098402000202" target="_black" rel="nofollow">鄂公网安备 42098402000202号</a></li></ul><ul><li><script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914"></script></li></ul></div></footer></main><div class="float_btns"><div class="totop" id="totop"><i class="ri-arrow-up-line"></i></div><div class="todark" id="todark"><i class="ri-moon-line"></i></div></div><aside class="sidebar on"><button class="navbar-toggle"></button><nav class="navbar"><div class="logo"><a href="/"><img src="/mytouxiang.gif" alt="耀耀切克闹"></a></div><ul class="nav nav-main"><li class="nav-item"><a class="nav-item-link" href="/">主页</a></li><li class="nav-item"><a class="nav-item-link" href="/archives">归档</a></li><li class="nav-item"><a class="nav-item-link" href="/categories">分类</a></li><li class="nav-item"><a class="nav-item-link" href="/tags">标签</a></li><li class="nav-item"><a class="nav-item-link" href="/about">关于我</a></li></ul></nav><nav class="navbar navbar-bottom"><ul class="nav"><li class="nav-item"><a class="nav-item-link nav-item-search" title="搜索"><i class="ri-search-line"></i> </a><a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed"><i class="ri-rss-line"></i></a></li></ul></nav><div class="search-form-wrap"><div class="local-search local-search-plugin"><input type="search" id="local-search-input" class="local-search-input" placeholder="Search..."><div id="local-search-result" class="local-search-result"></div></div></div></aside><div id="mask"></div><div id="reward"><span class="close"><i class="ri-close-line"></i></span><p class="reward-p">我是穷比，在线乞讨！</p><div class="reward-box"><div class="reward-item"><img class="reward-img" src="/images/alipay.png"> <span class="reward-type">支付宝</span></div><div class="reward-item"><img class="reward-img" src="/images/wechat.png"> <span class="reward-type">微信</span></div></div></div><script src="/js/jquery-3.6.0.min.js"></script><script src="/js/lazyload.min.js"></script><script src="/js/tocbot.min.js"></script><script>tocbot.init({tocSelector:".tocbot",contentSelector:".article-entry",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0,scrollSmooth:!0,scrollContainer:"main",positionFixedSelector:".tocbot",positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto"})</script><script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"><script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script><script src="/dist/main.js"></script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css"><script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script><script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script><script>function viewer_init(){let t=document.querySelectorAll(".pswp")[0],e=document.querySelectorAll(".article-entry img:not(.reward-img)");e.forEach((i,r)=>{i.onclick=()=>{if(document.querySelector(".left-col.show"))return;let i=[];e.forEach((t,e)=>{t.getAttribute("data-idx",e);let r=t.getAttribute("data-target")||t.getAttribute("src"),o=t.getAttribute("alt");const c=new Image;c.src=r,i.push({src:r,w:c.width||t.width,h:c.height||t.height,title:o})}),new PhotoSwipe(t,PhotoSwipeUI_Default,i,{index:parseInt(r)}).init()}})}viewer_init()</script><script src="/js/busuanzi-2.3.pure.min.js"></script><script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script><script src="/js/clickBoom1.js"></script><link rel="stylesheet" href="/css/clipboard.css"><script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script><script>function wait(e,i){window.setTimeout(e,i)}window,document,function(){var e="";e+='<button class="btn-copy" data-clipboard-snippet="">',e+='<i class="ri-file-copy-2-line"></i><span>COPY</span>',e+="</button>",$(".highlight .code pre").before(e),$(".article pre code").before(e);var i=new ClipboardJS(".btn-copy",{target:function(e){return e.nextElementSibling}});i.on("success",(function(e){let i=$(e.trigger);i.addClass("copied");let n=$(i.find("i"));n.removeClass("ri-file-copy-2-line"),n.addClass("ri-checkbox-circle-line");let l=$(i.find("span"));l[0].innerText="COPIED",wait((function(){n.removeClass("ri-checkbox-circle-line"),n.addClass("ri-file-copy-2-line"),l[0].innerText="COPY"}),2e3)})),i.on("error",(function(e){e.clearSelection();let i=$(e.trigger);i.addClass("copy-failed");let n=$(i.find("i"));n.removeClass("ri-file-copy-2-line"),n.addClass("ri-time-line");let l=$(i.find("span"));l[0].innerText="COPY FAILED",wait((function(){n.removeClass("ri-time-line"),n.addClass("ri-file-copy-2-line"),l[0].innerText="COPY"}),2e3)}))}()</script><script src="/js/snow2.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"}),window.onload=function(){for(var e=document.getElementsByTagName("img"),r=0;r<e.length;r++)e[r].referrerPolicy="no-referrer"}</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html>